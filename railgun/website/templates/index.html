{% extends "base.html" %}
{% block subtitle -%}
{{ _('Homepage') }}
{%- endblock %}
{% block content -%}
  {% if not current_user.is_authenticated() -%}
  <div class="jumbotron" id="site-description">
    <h1>{{ _('Welcome to Railgun') }}</h1>
    <p>{{ _('Railgun is an online Software Enginnering homework judger.') }}<br />
       {{ _('To take the course, you should join Railgun first.') }}</p>
    <p>
      <a class="btn btn-primary btn-lg" role="button" href="{{ url_for('signup') }}">
        {{ _('Create your account') }}
      </a>
    </p>
  </div>
  {%- else -%}
    <h3 class="hw-heading">{{ _('Your Homeworks') }}</h3>
    <table class="table table-hover">
      <tr>
        <th>{{ _('Name') }}</th>
        <th>{{ _('Languages') }}</th>
        <th>{{ _('Due / Scale') }}</th>
        <th>{{ _('Submission') }}</th>
      </tr>
      {%- for hw in g.homeworks %}
      <tr>
        <td class="hw-name">
          <a href="{{ url_for('homework', slug=hw.slug) }}">{{ hw.info.name }}</a>
        </td>
        <td class="hw-languages">
          {% for c in hw.get_code_languages() %}<span>{{ c }}</span>{% endfor %}
        </td>
        <td class="hw-deadline">
          {%- set next_deadline = hw.get_next_deadline() -%}
          {% if next_deadline -%}
            {%- set ddl_date, ddl_scale = next_deadline -%}
            <span class="hw-ddl-date">{{ ddl_date | timedeltaformat }}</span> /
            <span class="hw-ddl-scale">{{ ddl_scale }}</span>
          {%- else -%}
            {{ _('Out of date') }}
          {%- endif %}
        </td>
        <td class="hw-status">
          {{ _('Not yet') }}
        </td>
      </tr>
      {%- endfor %}
    </table>
  {%- endif %}
{%- endblock %}